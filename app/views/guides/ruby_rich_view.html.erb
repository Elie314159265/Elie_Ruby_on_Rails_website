<%# ヒーローセクション %>
<div class="text-center mb-12 animate-fade-in-up">
  <h1 class="text-4xl font-bold text-gray-800 mb-4">
    リッチなWebページにしよう！！（≧∇≦）
  </h1>
  <p class="text-gray-600 text-lg">
    おしゃれなデザインと、クエリでのデータ受け渡しをマスターしよう！
  </p>
</div>

<%# メインコンテンツ %>
<div class="bg-white rounded-2xl p-8 shadow-lg mb-8">

  <%# CSSセクション %>
  <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b-2 border-sky-500 pb-2">
    1. デザインの基本：CSS (Cascading Style Sheets)
  </h2>

  <p class="text-gray-700 mb-4 leading-relaxed">
    先のページではViewを作りましたが...まだ白黒で素っ気ないですよね(；ω；)<br>
    人間で言うなら「寝起きスッピンでパジャマ」の状態です(つд⊂)ｺﾞｼｺﾞｼ<br>
    そこで<strong>「スタイルシート（CSS）」</strong>の出番です！
  </p>

  <%# CSSの例え %>
  <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded mb-6">
    <h3 class="font-bold text-gray-800 mb-2">CSSとは？</h3>
    <p class="text-sm text-gray-900">
      例えるなら<strong>「Webページの『メイクアップ道具』や『ファッション』」</strong>です！<br>
      HTMLという「骨格・肉体」に対して、色を塗ったり（メイク）、配置を整えたり（コーディネート）して、魅力的に見せるための指示書です(｀・ω・´)ｼｬｷｰﾝ
    </p>
  </div>

  <div class="mb-6">
    <h3 class="font-bold text-gray-800 mb-2">やってみよう：CSSを書いてみる</h3>
    <p class="text-gray-700 mb-2">

        <div class="bg-gray-100 p-3 rounded mb-4 font-mono text-sm text-gray-600">
            app/assets/stylesheets/application.css<span class="text-gray-400">← に以下のコードを追記してみましょう。</span>
        </div>
    </p>
    <div class="bg-gray-800 rounded-lg p-4 text-gray-200 text-sm font-mono mb-2 shadow-md relative">
      <div class="absolute top-2 right-2 text-xs text-gray-500">application.css</div>
<pre><code class="language-css">/* 全体の背景を少しグレーにして見やすく */
body {
  background-color: #f0f2f5;
  font-family: 'Helvetica Neue', Arial, sans-serif;
  color: #333;
}

/* 見出しをおしゃれに */
h1 {
  color: #0ea5e9; /* スカイブルー */
  text-align: center;
  padding: 20px;
}</code></pre>
    </div>

    <div class="mt-4 p-4 border-2 border-dashed border-gray-300 rounded-lg text-center bg-gray-50">
      <p class="text-gray-500 text-sm mb-2">ブラウザにこんな感じで表示されれば大成功です！(*^^*)</p>
      <div class="bg-white border border-gray-200 p-4 rounded shadow-sm inline-block text-left">
        <%= image_tag 'rich_view_1.png', class: 'ControllerPicture' %>
      </div>
    </div>

    <p class="text-sm text-gray-600 mt-2">
      書き換えたら <code>$ rails server</code> で確認！少し雰囲気が変わったはずです!
    </p>
    <br>
    これがサイト全体の基本スタイルになります(*‘ω‘ *)
  </div>

  <%# Bootstrapセクション %>
  <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b-2 border-sky-500 pb-2 mt-12">
    2. 魔法のツール：Bootstrap
  </h2>

  <p class="text-gray-700 mb-4 leading-relaxed">
    CSSを全部自分で書くのは大変ですよね...。<br>
    そこで<strong>「Bootstrap」</strong>を使います！これはTwitter社（現X）が開発したデザインフレームワークです。
  </p>

  <%# Bootstrapの例え %>
  <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded mb-6">
    <h3 class="font-bold text-gray-800 mb-2">Bootstrapとは？</h3>
    <p class="text-sm text-gray-900">
      例えるなら<strong>「プロのスタイリストが選んだ『既製服のセットアップ』」</strong>です！<br>
      自分で布から服を縫わなくても（CSSを一から書かなくても）、用意されたクラス名（ブランド服）を着るだけで、誰でも一瞬で今風のデザインになれる魔法のツールです。
      今回はCDNで配信されているBootstrapのスタイルシートを使います。
    </p>
  </div>

  <%# CDNの解説 %>
  <div class="mb-6">
    <h3 class="font-bold text-gray-800 mb-2">CDN (Content Delivery Network) って？</h3>
    <p class="text-gray-700 mb-3">
      Bootstrapを使うにはファイルをダウンロードする方法もありますが、今回は「CDN」を使います。<br>
      CDNとは、例えるなら<strong>「全国どこにでもあるコンビニ」</strong>です！
    </p>
    <ul class="list-disc list-inside text-sm text-gray-600 bg-gray-100 p-3 rounded mb-4">
      <li><strong>通常：</strong> 本店（遠くのサーバー）まで商品を取りに行く → 遅い</li>
      <li><strong>CDN：</strong> 最寄りのコンビニ（近くのサーバー）から受け取る → 速い！</li>
    </ul>
  </div>

  <div class="mb-6">
    <h3 class="font-bold text-gray-800 mb-2">やってみよう：CDNを埋め込む</h3>
    <p class="text-gray-700 mb-2">
      Webページの「設計図」である <code>app/views/layouts/application.html.erb</code>に以下のコードを上書きします。。
    </p>
    <div class="bg-gray-800 rounded-lg p-4 text-gray-200 text-sm font-mono mb-2 shadow-md relative">
      <div class="absolute top-2 right-2 text-xs text-gray-500">application.html.erb</div>
<pre><code class="language-html">


&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;My Rails Portfolio&lt;/title&gt;
    &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;
    &lt;%= csrf_meta_tags %&gt;
    &lt;%= csp_meta_tag %&gt;

    &lt;%# Bootstrap CSS (CDN) - これでプロのデザインパーツが使い放題！ %&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous"&gt;

    &lt;%= stylesheet_link_tag "application", "data-turbo-track": "reload" %&gt;
    &lt;%= javascript_importmap_tags %&gt;
  &lt;/head&gt;

  &lt;%# d-flex flex-column min-vh-100 は、フッターを常に最下部に固定するための魔法のクラスです %&gt;
  &lt;body class="d-flex flex-column min-vh-100"&gt;
    
    &lt;%# --- ナビゲーションバー (Header) --- %&gt;
    &lt;nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4 shadow-sm"&gt;
      &lt;div class="container"&gt;
        &lt;%# ロゴ部分 %&gt;
        &lt;a class="navbar-brand fw-bold" href="/"&gt; My Page1&lt;/a&gt;
        
        &lt;%# スマホ用ハンバーガーボタン %&gt;
        &lt;button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"&gt;
          &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;
        &lt;/button&gt;

        &lt;%# メニュー項目 %&gt;
        &lt;div class="collapse navbar-collapse" id="navbarNav"&gt;
          &lt;ul class="navbar-nav ms-auto"&gt;
            &lt;li class="nav-item"&gt;
              &lt;a class="nav-link active" aria-current="page" href="/"&gt;Home&lt;/a&gt;
            &lt;/li&gt;
            &lt;li class="nav-item"&gt;
              &lt;a class="nav-link" href="/my/page1"&gt;My Page&lt;/a&gt;
            &lt;/li&gt;
            &lt;li class="nav-item"&gt;
              &lt;a class="nav-link" href="#"&gt;About&lt;/a&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/nav&gt;

    &lt;%# --- メインコンテンツ --- %&gt;
    &lt;main class="container mb-5 flex-grow-1"&gt;
      &lt;%# フラッシュメッセージ（通知などがあればここに表示） %&gt;
      &lt;% flash.each do |message_type, message| %&gt;
        &lt;div class="alert alert-&lt;%= message_type == 'notice' ? 'success' : 'danger' %&gt; alert-dismissible fade show shadow-sm" role="alert"&gt;
          &lt;%= message %&gt;
          &lt;button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"&gt;&lt;/button&gt;
        &lt;/div&gt;
      &lt;% end %&gt;

      &lt;%# ここに各Viewの中身（page1.html.erbなど）が埋め込まれます %&gt;
      &lt;div class="bg-white p-5 rounded shadow-sm border"&gt;
        &lt;%= yield %&gt;
      &lt;/div&gt;
    &lt;/main&gt;

    &lt;%# --- フッター --- %&gt;
    &lt;footer class="bg-light text-center text-lg-start mt-auto py-4 border-top"&gt;
      &lt;div class="container text-center text-muted"&gt;
        &lt;p class="mb-0"&gt;&copy; &lt;%= Time.current.year %&gt; My Rails Page1. All rights reserved.&lt;/p&gt;
        &lt;small&gt;Ruby on Rails Bootstrap&lt;/small&gt;
      &lt;/div&gt;
    &lt;/footer&gt;

    &lt;%# Bootstrap JS (CDN) - ドロップダウンやハンバーガーメニューを動かすために必要 %&gt;
    &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;


</code></pre>
    </div>
    <p class="text-sm text-gray-600 mt-2">
      これだけで、世界中のプロが使うデザインパーツが使い放題になります！(ΦωΦ)<br>
      <span class="text-xs">※ボタンに <code>class="btn btn-primary"</code> とつけるだけで青い綺麗なボタンになったりします。</span>
    </p>
    <div class="mt-4 p-4 border-2 border-dashed border-gray-300 rounded-lg text-center bg-gray-50">
      <p class="text-gray-500 text-sm mb-2">ブラウザにこんな感じで表示されれば大成功です！(*^^*)</p>
      <div class="bg-white border border-gray-200 p-4 rounded shadow-sm inline-block text-left">
        <%= image_tag 'rich_view_2.png', class: 'ControllerPicture' %>
      </div>
    </div>
  </div>

</div>

<%# クエリパラメータセクション %>
<div class="bg-white rounded-2xl p-8 shadow-lg mb-8">

  <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b-2 border-sky-500 pb-2">
    3. クエリパラメータを学ぼう！
  </h2>

  <p class="text-gray-700 mb-4 leading-relaxed">
    デザインの次は、データのやり取りです。<br>
    「クエリ（Query）」とは「問い合わせ」という意味で、URLを使ってクライアント（ブラウザ）からサーバーに情報を渡す仕組みです。
  </p>

  <%# URLの解剖図 %>
  <div class="bg-gray-100 p-4 rounded-lg text-center mb-6 font-mono text-lg break-all">
    <span class="text-gray-400">https://example.com/</span><span class="text-red-400 font-bold">?</span><span class="text-sky-600 font-bold">name=Elie</span><span class="text-red-400 font-bold">&</span><span class="text-sky-600 font-bold">age=20</span>
  </div>

  <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded mb-6">
    <h3 class="font-bold text-gray-800 mb-2">クエリパラメータの仕組み</h3>
    <p class="text-sm text-gray-900 mb-2">
      例えるなら<strong>「二郎系ラーメンの注文」</strong>です！！
    </p>
    <ul class="list-none text-sm text-gray-900 space-y-1">
      <li><strong>①URL本体：</strong> 「食券を出す」</li>
      <li><strong>②? (クエリは？)：</strong> 「にんにく入れますか？」</li>
      <li><strong>③key=value,&(つなぎ)：</strong> 「ニンニク&ヤサイマシ&アブラ&カラメ」</li>
    </ul>
    <br>
    <p class="text-sm text-gray-900 mb-2">
      クライアント(お客さん)から情報(注文)を受け取るためにクエリがあるのです(ﾟ∀ﾟ)ｵｲｼｲ!
    </p>
  </div>

  <%# 実践コード %>
  <div class="mb-6">
    <h3 class="font-bold text-gray-800 mb-2">やってみよう：名前を受け取る処理</h3>
    <p class="text-gray-700 mb-2">
      <code>app/controllers/my_controller.rb</code> を編集して、渡された名前を表示できるようにしましょう。
    </p>
    
    <div class="bg-gray-800 rounded-lg p-4 text-gray-200 text-sm font-mono mb-2 shadow-md relative">
      <div class="absolute top-2 right-2 text-xs text-gray-500">my_controller.rb</div>
<pre><code class="language-ruby">class MyController < ApplicationController
  def page1
    # params[:キー名] で、URLから渡されたデータを取り出せます！
    if params[:name] != nil
      # 名前がある場合
      render html: "&lt;h1&gt;こんにちは、#{params[:name]}さん！&lt;/h1&gt;".html_safe
    else
      # 名前がない場合 (nilの場合)
      render html: "&lt;h1&gt;こんにちは、ゲストさん！&lt;/h1&gt;".html_safe
    end
  end
end</code></pre>
    </div>
  </div>

  <%# 処理フローのまとめ %>
  <div class="bg-gradient-to-r from-sky-50 to-blue-50 rounded-lg p-6 mb-4">
    <h3 class="font-bold text-gray-800 mb-4 text-center">処理の流れまとめ</h3>
    
    [Image of web request response cycle diagram]
    
    <ol class="space-y-4 text-sm text-gray-700 mt-4">
      <li class="flex items-start">
        <span class="bg-sky-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-2 flex-shrink-0">1</span>
        <div>
          <strong>クライアント：</strong> URL <code>.../page1?name=Elie</code> にアクセス。<br>
          <span class="text-xs text-gray-500">「Elieという名前付きでページが見たい！」とリクエスト。</span>
        </div>
      </li>
      <li class="flex items-start">
        <span class="bg-sky-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-2 flex-shrink-0">2</span>
        <div>
          <strong>サーバー (Rails)：</strong> <code>params[:name]</code> の中身を確認。<br>
          <span class="text-xs text-gray-500">「お、"Elie"が入ってるな。じゃあ名前付きのページを作ろう」</span>
        </div>
      </li>
      <li class="flex items-start">
        <span class="bg-sky-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-2 flex-shrink-0">3</span>
        <div>
          <strong>レスポンス：</strong> 「こんにちは、Elieさん！」というHTMLを返す。
        </div>
      </li>
    </ol>
  </div>
  
  <p class="text-gray-700 font-bold text-center mt-4">
    これが動的なWebアプリケーションの第一歩です！(｀・ω・´)
  </p>

</div>

<%# ナビゲーション %>
<div class="flex justify-between mt-8">
  <%= link_to "← 前の記事：Viewの基本", "/guides/ruby_view", class: "text-sky-600 hover:text-sky-700 font-medium" %>
  <%= link_to " 次の記事：リダイレクトとヘルパー →", "/guides/ruby_redirect_helper", class: "text-sky-600 hover:text-sky-700 font-medium" %>