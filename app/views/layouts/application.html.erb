<!DOCTYPE html>
<html lang="ja">
  <head>
    <title><%= content_for(:title) || "Elie's Portfolio" %></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%# Tailwind CSS (CDN) %>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#e0f2fe',
              secondary: '#bae6fd',
              accent: '#0284c7',
              dark: '#0f172a',
            },
            fontFamily: {
              sans: ['Helvetica Neue', 'Arial', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Meiryo', 'sans-serif'],
            },
            animation: {
              'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
            },
            keyframes: {
              fadeInUp: {
                '0%': { opacity: '0', transform: 'translateY(20px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              }
            }
          }
        }
      }
    </script>

    <%# Google Fonts %>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <%# Markdown Styles (Github Flavored Markdowné¢¨) %>
    <style>
      .markdown-body h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2rem; margin-bottom: 1rem; border-bottom: 2px solid #0284c7; padding-bottom: 0.3rem; color: #1e293b; }
      .markdown-body h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.75rem; color: #334155; }
      .markdown-body p { margin-bottom: 1rem; line-height: 1.8; color: #334155; }
      .markdown-body ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1rem; color: #334155; }
      .markdown-body ol { list-style-type: decimal; padding-left: 1.5rem; margin-bottom: 1rem; color: #334155; }
      .markdown-body a { color: #0284c7; text-decoration: underline; }
      .markdown-body a:hover { color: #0369a1; }
      .markdown-body pre { background-color: #1e293b; color: #f8fafc; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; margin-bottom: 1.5rem; }
      .markdown-body code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background-color: #f1f5f9; padding: 0.2rem 0.4rem; border-radius: 0.25rem; color: #0f172a; font-size: 0.875em; }
      .markdown-body pre code { background-color: transparent; color: inherit; padding: 0; font-size: 1em; }
      .markdown-body blockquote { border-left: 4px solid #cbd5e1; padding-left: 1rem; color: #64748b; font-style: italic; margin-bottom: 1rem; }
      .markdown-body img { max-width: 100%; height: auto; border-radius: 0.5rem; margin: 1.5rem 0; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
    </style>

    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="font-sans flex flex-col min-h-screen" style="background-color: #e0f2fe; color: #0f172a;">

    <%# Navigation %>
    <nav class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex items-center">
            <%= link_to root_path, class: "flex items-center space-x-2 group" do %>
              <span class="material-symbols-outlined text-accent text-3xl group-hover:scale-110 transition-transform"></span>
              <span class="text-xl font-bold tracking-wider text-gray-700 group-hover:text-accent transition-colors">Elie's Portfolio</span>
            <% end %>
          </div>

          <div class="hidden sm:flex sm:items-center sm:space-x-8">
            <%= link_to "Home", root_path, class: "bg-accent text-white hover:bg-sky-700 px-4 py-2 rounded-full text-sm font-medium transition-all shadow-md hover:shadow-lg" %>
            <%= link_to "About", "/guides/ruby_overview", class: "bg-accent text-white hover:bg-sky-700 px-4 py-2 rounded-full text-sm font-medium transition-all shadow-md hover:shadow-lg" %>
            <%= link_to "Works", "/guides/ruby_overview", class: "bg-accent text-white hover:bg-sky-700 px-4 py-2 rounded-full text-sm font-medium transition-all shadow-md hover:shadow-lg" %>
            <%= link_to "Blog", "/guides/ruby_overview", class: "bg-accent text-white hover:bg-sky-700 px-4 py-2 rounded-full text-sm font-medium transition-all shadow-md hover:shadow-lg" %>
          </div>
        </div>
      </div>
    </nav>

    <%# Flash Messages %>
    <% flash.each do |key, value| %>
      <div class="max-w-5xl mx-auto px-4 mt-4 animate-fade-in-up">
        <% color_class = key == 'notice' ? 'bg-sky-100 text-sky-800 border-sky-200' : 'bg-red-100 text-red-800 border-red-200' %>
        <div class="<%= color_class %> px-4 py-3 rounded-lg border flex items-center shadow-sm">
          <span class="material-symbols-outlined mr-2 text-lg"><%= key == 'notice' ? 'check_circle' : 'error' %></span>
          <span class="text-sm font-medium"><%= value %></span>
        </div>
      </div>
    <% end %>

    <%# Main Content %>
    <main class="flex-grow w-full max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
      <%= yield %>
    </main>

    <%# Footer %>
    <footer class="bg-white mt-auto py-8 border-t border-sky-100">
      <div class="max-w-5xl mx-auto px-4 text-center">
        <p class="text-gray-400 text-sm">
          &copy; <%= Time.current.year %> Elie's Ruby on Rails Portfolio. <br class="sm:hidden">
          All rights reserved.
        </p>
      </div>
    </footer>

  </body>
</html>
